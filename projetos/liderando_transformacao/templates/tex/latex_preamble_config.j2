{# latex_preamble_config.j2 #}
{% set LB = '{' %}
{% set RB = '}' %}

% --- Pacotes Básicos ---
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{amsmath} % Exemplo, pode ser adicionado condicionalmente

% --- Configurações de Geometria (Margens) ---
{% if styles.document_settings.margins %}
\usepackage[margin={{ styles.document_settings.margins | replace('cm', 'cm') }}]{geometry}
{% else %}
\usepackage[margin=2.5cm]{geometry} % Padrão
{% endif %}

% --- Configurações de Fonte ---
\usepackage{fontspec} % Requer XeLaTeX ou LuaLaTeX
{% if styles.paragraph_default["font-family"] %}
\setmainfont{{ LB }}{{ styles.paragraph_default["font-family"] }}{{ RB }}
{% endif %}
{% if styles.heading_1["font-family"] %}
\setsansfont{{ LB }}{{ styles.heading_1["font-family"] }}{{ RB }}
{% endif %}

% --- Configurações de Cores ---
\usepackage{xcolor}
{% if styles.colors %}
    {% for name, hex_code in styles.colors.items() %}
        \definecolor{{ LB }}{{ name }}{{ RB }}{HTML}{{ LB }}{{ hex_code | replace("#", "") }}{{ RB }}
    {% endfor %}
{% else %}
    \definecolor{text_default}{HTML}{333333}
    \definecolor{heading_default}{HTML}{000080}
{% endif %}

% --- Configurações de Estilo Global (do ODT/CSS JSON) ---
{% if styles.paragraph_default %}
\setlength{\parindent}{{% if styles.paragraph_default["text-indent"] %}{{ styles.paragraph_default["text-indent"] | replace("cm", "cm") }}{% else %}0pt{% endif %}}
\linespread{% if styles.paragraph_default["line-height"] %}{{ styles.paragraph_default["line-height"] }}{% else %}1.0{% endif %}
\parskip={% if styles.paragraph_default["margin-bottom"] %}{{ styles.paragraph_default["margin-bottom"] | replace("cm", "cm") }}{% else %}0pt{% endif %}
{% if styles.paragraph_default["color"] %}
\color{{ LB }}{{ styles.paragraph_default["color"] | replace("#", "customcolor") }}{{ RB }} % Isso aqui precisaria de um filtro/lógica para mapear #HEX para nome de cor LaTeX
{% endif %}
{% endif %}
