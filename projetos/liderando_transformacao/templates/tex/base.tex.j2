\documentclass[
  {% if styles.paragraph_default["font-size"] %}{{ styles.paragraph_default["font-size"] | replace("pt", "") }}pt{% endif %}
]{article}

\usepackage[
  {% if styles.document_margins %}
    {{ styles.document_margins | replace("cm", "cm") }}
  {% else %}
    margin=2.5cm
  {% endif %}
]{geometry}
\usepackage{fontspec} % Para controle de fontes modernas (XeLaTeX/LuaLaTeX)
\usepackage{xcolor}
\usepackage{titlesec}
\usepackage{setspace}
\usepackage{enumitem} % Para listas

% Mapeamento de Cores
{% if styles.colors %}
  {% for name, hex in styles.colors.items() %}
    \definecolor{% raw %}{{% endraw %}{{ name }}{% raw %}}{% endraw %}}{HTML}{% raw %}{{% endraw %}{{ hex | replace("#", "") }}{% raw %}}{% endraw %}}
  {% endfor %}
{% else %}
  \definecolor{text_gray}{HTML}{333333}
  \definecolor{DarkBlueHeading}{HTML}{000080}
{% endif %}

% Configurações de Fontes
{% if styles.paragraph_default["font-family"] %}
  \setmainfont{% raw %}{{% endraw %}{{ styles.paragraph_default["font-family"] }}{% raw %}}{% endraw %}
{% endif %}
{% if styles.heading_1["font-family"] %}
  \setsansfont{% raw %}{{% endraw %}{{ styles.heading_1["font-family"] }}{% raw %}}{% endraw %}
{% endif %}

% Estilo de Parágrafo Padrão
{% if styles.paragraph_default %}
  \setlength{\parindent}{{% raw %}{{% endraw %}{{ styles.paragraph_default["text-indent"] | replace("cm", "cm") }}{% raw %}}{% endraw %}}
  \linespread{{ styles.paragraph_default["line-height"] }}
  \parskip={% raw %}{{% endraw %}{{ styles.paragraph_default["margin-bottom"] | replace("cm", "cm") }}{% raw %}}{% endraw %}
  \color{% raw %}{{% endraw %}{{ styles.paragraph_default["color"] | replace("#", "customcolor") }}{% raw %}}{% endraw %} % Pode exigir uma função para mapear HEX para nome de cor LaTeX
{% endif %}

% Estilo de Título Nível 1
{% if styles.heading_1 %}
  \titleformat{\section}
    {{\\fontsize{% raw}{{% endraw %}{{ styles.heading_1["font-size"] | replace("pt", "") }}pt}{{% raw}{{% endraw %}{{ (styles.heading_1["font-size"] | replace("pt", "") | float * 1.2) | round(2) }}pt}\\selectfont}
    \\textbf{{\\color{% raw}{{% endraw %}{{ styles.heading_1["color"] | replace("#", "customcolor") }}{% raw}{{% endraw %}}}}
    {}
    {0pt}{}
  [\vspace{{ styles.heading_1["margin-top"] | replace("cm", "cm") }}] % Espaço antes
  \titlespacing*{\section}{0pt}{0pt}{{% raw}{{% endraw %}{{ styles.heading_1["margin-bottom"] | replace("cm", "cm") }}{% raw}{{% endraw %}}} % Espaço depois
{% endif %}

\begin{document}

\title{% raw}{{% endraw %}{{ content.title }}{% raw}{{% endraw %}}
\author{% raw}{{% endraw %}{{ content.author }}{% raw}{{% endraw %}}
\maketitle

{% for section in content.sections %}
  {% if section.type == "heading_1" %}
    \section{% raw}{{% endraw %}{{ section.text }}{% raw}{{% endraw %}}
  {% endif %}
  {% for item in section.content %}
    {% if item.type == "paragraph_default" %}
      {% raw}{{% endraw %}{{ item.text }}{% raw}{{% endraw %}}
    {% elif item.type == "list_item_bullet" %}
      % Renderizar lista aqui com \begin{itemize} e \item
    {% endif %}
    \par % Garante nova linha para cada parágrafo
  {% endfor %}
{% endfor %}

\end{document}
