% projetos/lideracao_transformacao/templates/tex/base.tex.j2

\documentclass[
  {{ styles.paragraph_default_font_size_pt }}pt
]{article}

\usepackage[
  margin={{ styles.document_margins_cm }}cm
]{geometry}
\usepackage{fontspec} % Para controle de fontes modernas (XeLaTeX/LuaLaTeX)
\usepackage{xcolor}
\usepackage{titlesec}
\usepackage{setspace}
\usepackage{enumitem} % Para listas
\usepackage{ragged2e} % Para \justifying (se precisar de justificação completa)
\usepackage[{{ lang }}]{babel} % Suporte a idiomas (brazil, english)
\usepackage{hyperref} % Para links gerados pelo Pandoc
% Você pode precisar de outros pacotes se o Pandoc gerar LaTeX para imagens, tabelas, etc.
% Ex: \usepackage{graphicx} para imagens

% Mapeamento de Cores
{% for name, hex in styles.colors.items() %}
\definecolor{ {{- name -}} }{HTML}{ {{- hex -}} }
{% endfor %}

% Configurações de Fontes
\setmainfont{ {{- styles.paragraph_default_font_family -}} }
\setsansfont{ {{- styles.heading_1_font_family -}} }

% Estilo de Parágrafo Padrão
\setlength{\parindent}{ {{- styles.paragraph_default_text_indent_cm -}} cm}
\linespread{ {{- styles.paragraph_default_line_height -}} }
\parskip={{ styles.paragraph_default_margin_bottom_cm }}cm plus 1pt % Adicionado "plus 1pt" para evitar badbox
\color{ {{- styles.paragraph_default_color_name -}} }

% Estilo de Título Nível 1 (Section)
\titleformat{\section}
  {\fontsize{ {{- styles.heading_1_font_size_pt -}} pt}{ {{- styles.heading_1_line_spacing_pt -}} pt}\selectfont}
  {\textbf{\color{ {{- styles.heading_1_color_name -}} }}}
  {}
  {0pt}{}
[\vspace{ {{- styles.heading_1_margin_top_cm -}} cm}] % Espaço antes
\titlespacing*{\section}{0pt}{0pt}{ {{- styles.heading_1_margin_bottom_cm -}} cm} % Espaço depois


\begin{document}

\title{ {{- content.title -}} }
\author{ {{- content.author -}} }
\maketitle

% Exemplo de Sumário e Conteúdo:
\tableofcontents

{% for section in content.sections %}
  {% if section.type == "heading_part" %}
\part{ {{- section.text -}} } % Comando para "partes" em LaTeX
  {% elif section.type == "heading_1" %}
\section{ {{- section.text -}} } % Títulos de capítulo/seção
  {% endif %}
  
  {# Itera sobre o conteúdo da seção (agora é provável que haja apenas um item 'raw_latex') #}
  {% for item in section.content %}
    {% if item.type == "raw_latex" %}
      {{ item.text }} {# Imprime o LaTeX gerado pelo Pandoc diretamente #}
    {% endif %}
  {% endfor %}
  
{% endfor %}

\end{document}
